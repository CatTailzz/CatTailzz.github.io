---
title: 二维码扫码登录设计
subtitle:
date: 2024-08-15T14:58:05+08:00
slug: 14a0447
draft: true
tags:
  - draft
categories:
  - draft
# collections:
#   - draft

password:
message:
---
# 整体流程

以b站为例，在网页端点击登录，出现待扫描二维码

![image.png](https://obsidian-img-1300316500.cos.ap-shanghai.myqcloud.com/cattail/obsidian/pic/202408151500332.png)

手机端，使用一个已登录状态的账号扫描二维码后，网页端显示扫码成功，手机端弹出二次确认界面

![image.png](https://obsidian-img-1300316500.cos.ap-shanghai.myqcloud.com/cattail/obsidian/pic/202408151501827.png)

![image.png](https://obsidian-img-1300316500.cos.ap-shanghai.myqcloud.com/cattail/obsidian/pic/202408151503505.png)


若长时间未确认，网页端提示二维码已经过期，请重新登录，手机端点击确认登录后也会跟着提示二维码已经过期

![image.png](https://obsidian-img-1300316500.cos.ap-shanghai.myqcloud.com/cattail/obsidian/pic/202408151502841.png)

![image.png](https://obsidian-img-1300316500.cos.ap-shanghai.myqcloud.com/cattail/obsidian/pic/202408151504380.png)

# 什么是二维码

二维码本质是存储文本用的，可以用于简单的条形码、电话、邮件、配置，当然现在大多数场景是用于存储url，我们可以通过一些二维码解析工具，对前面的二维码进行解析

![image.png](https://obsidian-img-1300316500.cos.ap-shanghai.myqcloud.com/cattail/obsidian/pic/202408151533041.png)

我们可以看到这个码的基本信息就是一个url，里面包含了 `qrcode_key` 即二维码 id，以及一些来源、登录方式的信息

# 过程梳理

## 参与角色

- 【PC端】- 待登录的设备
- 【移动端】- 已经登录的设备，负责扫码
- 【服务端】- 作为中间者负责所有请求的处理

## 全流程状态机



# 一些经典问题

## PC端做状态变更的凭据 / 方式是什么？

 PC端主动轮询
 
服务端通知，发送请求
## 为什么需要二次确认？

